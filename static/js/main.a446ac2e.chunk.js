(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{35:function(e,t,n){e.exports=n(78)},40:function(e,t,n){},44:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},76:function(e,t,n){},78:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(14),s=n.n(i),c=(n(40),n(33)),o=(n(44),n(27)),l=n(24),u=n(3),m=n(5),d=n.n(m),f=n(81),b=n(10),p=n(16),h=n(17),g=n(18),v=n(19),E=(n(46),a.Component,n(47),n(34)),y=n(25),j=n.n(y),O=function(e){Object(v.a)(n,e);var t=Object(g.a)(n);function n(e,a){var r;return Object(p.a)(this,n),(r=t.call(this,e,a)).onChangeText=function(e){var t=e.target.value,n=t.split(":"),a=(e.target.id,parseInt(n.pop(),10)||0),i=parseInt(n.pop(),10)||0,s=parseInt(n.pop(),10)||0,c=60*s*60+60*i+a;console.log(s,i,a),c=r.splitDuration(c),(""===t||r.state.regexp.test(t))&&r.setState({duration:t,hours:c.hours,minutes:c.minutes,seconds:c.seconds,endTime:d()(r.state.startTime).add(c,"seconds")._d},(function(){r.props.onChange({seconds:r.state.seconds,minutes:r.state.minutes,hours:r.state.hours,startTime:r.state.startTime,endTime:r.state.startTime})}))},r.onBlur=function(e){var t=e.target.value,n=t.split(":"),a=(e.target.id,parseInt(n.pop(),10)||0),i=parseInt(n.pop(),10)||0,s=parseInt(n.pop(),10)||0,c=60*s*60+60*i+a;console.log(s,i,a),c=r.splitDuration(c),(""===t||r.state.regexp.test(t))&&r.setState({duration:"".concat(r.padZero(c.hours),":").concat(r.padZero(c.minutes),":").concat(r.padZero(c.seconds))})},r.splitDuration=function(e){var t=e%60,n=(e-t)/60,a=n%60;return{seconds:t,minutes:a,hours:(n-a)/60}},r.getDuration=function(e,t){var n=d()(t).diff(d()(e),"seconds"),a=r.splitDuration(n),i=a.hours,s=a.minutes,c=a.seconds;r.setState({seconds:c,minutes:s,hours:i,duration:"".concat(r.padZero(i),":").concat(r.padZero(s),":").concat(r.padZero(c))},(function(){r.props.onChange({seconds:r.state.seconds,minutes:r.state.minutes,hours:r.state.hours,startTime:r.state.startTime,endTime:r.state.endTime})}))},r.onChangeStartTime=function(e){r.setState({startTime:e}),r.getDuration(e,r.state.endTime)},r.onChangeEndTime=function(e){r.setState({endTime:e}),r.getDuration(r.state.startTime,e)},r.saveDuration=function(){r.props.saveDuration({seconds:r.state.seconds,minutes:r.state.minutes,hours:r.state.hours,startTime:r.state.startTime,endTime:r.state.endTime})},r.padZero=function(e){return String("00"+e).slice(-2)},r.state={startTime:e.entry.startTime||new Date,endTime:e.entry.endTime||new Date,regexp:/^[0-9\:\b]+$/,seconds:e.entry.seconds,minutes:e.entry.minutes,hours:e.entry.hours,duration:"".concat(r.padZero(e.entry.hours),":").concat(r.padZero(e.entry.minutes),":").concat(r.padZero(e.entry.seconds))},r}return Object(h.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=(t.trigger,t.entry,t.onCancel);t.onClick;return r.a.createElement("div",{className:"duration-picker-container d-flex align-items-center"},r.a.createElement("div",{className:"form-group d-flex flex-row align-items-center mb-0"},r.a.createElement(E.a,{trigger:r.a.createElement("input",{type:"text",className:"form-control time-input-part",id:"duration",value:this.state.duration,onChange:this.onChangeText,onBlur:this.onBlur}),position:"bottom center",on:"focus"},(function(t){return r.a.createElement("div",{className:"d-flex"},r.a.createElement("div",{className:"d-flex flex-column"},r.a.createElement("label",{className:"text-secondary text-left"},r.a.createElement("small",null,"From")),r.a.createElement(j.a,{onChange:e.onChangeStartTime,value:e.state.startTime,disableClock:!0,calendarIcon:null,clearIcon:null,maxDetail:"second",maxDate:d()(e.state.endTime).subtract({seconds:1})._d,className:"mr-3"})),r.a.createElement("div",{className:"d-flex flex-column"},r.a.createElement("label",{className:"text-secondary text-left"},r.a.createElement("small",null,"To")),r.a.createElement(j.a,{onChange:e.onChangeEndTime,value:e.state.endTime,disableClock:!0,calendarIcon:null,clearIcon:null,maxDetail:"second",minDate:d()(e.state.startTime).add({seconds:1})._d})))}))),r.a.createElement("button",{className:"btn btn-secondary d-flex px-2 ml-2",onClick:this.saveDuration},r.a.createElement("i",{className:"material-icons-round"},"save")),r.a.createElement("button",{className:"btn btn-link text-dark d-flex p-0",onClick:n},r.a.createElement("i",{className:"material-icons-round"},"close")))}}]),n}(a.Component),T=function(e){return String("00"+e).slice(-2)};function w(e){var t=e.entry,n=e.handleDeleteEntry,i=e.handleEditEntry,s=Object(a.useState)(t.title),c=Object(u.a)(s,2),o=c[0],l=c[1],m=Object(a.useState)(t.startTime),f=Object(u.a)(m,2),b=f[0],p=f[1],h=Object(a.useState)(t.endTime),g=Object(u.a)(h,2),v=g[0],E=g[1],y=Object(a.useState)(t.seconds),j=Object(u.a)(y,2),w=(j[0],j[1]),N=Object(a.useState)(t.minutes),x=Object(u.a)(N,2),S=(x[0],x[1]),C=Object(a.useState)(t.hours),k=Object(u.a)(C,2),D=(k[0],k[1]),I=Object(a.useState)(!1),A=Object(u.a)(I,2),Z=A[0],W=A[1],B=Object(a.useState)(!1),M=Object(u.a)(B,2),U=M[0],_=M[1],R=null;Object(a.useEffect)((function(){R&&R.focus()}),[R,Z]);return r.a.createElement("li",{key:t.id,className:"list-group-item list-group-item-action d-flex justify-content-between align-items-center"},r.a.createElement("div",{className:"d-flex"},Z?r.a.createElement("div",{className:"form-group mb-0"},r.a.createElement("input",{type:"text",className:"form-control",id:"entryTitle",placeholder:"No title",value:o,onChange:function(e){l(e.target.value)},onKeyUp:function(e){if(13===e.which){W(!1);var n={title:e.target.value};i(t.id,n),R=null}},onBlur:function(e){W(!1);var n={title:e.target.value};i(t.id,n),R=null},"data-id":t.id,ref:function(e){R=e}})):r.a.createElement("div",{onClick:function(e){W(!0)}},t.title||"No title",r.a.createElement("small",{className:"ml-3"},d()(b).format("ddd MMM D, hh:mm:ssa")," - ",d()(v).format("ddd MMM D, hh:mm:ssa")))),r.a.createElement("div",{className:"d-flex flex-row align-items-center"},r.a.createElement("div",{className:"duration d-flex align-items-center"},U?r.a.createElement(r.a.Fragment,null,r.a.createElement(O,{entry:t,onChange:function(e){var t=e.seconds,n=e.minutes,a=e.hours,r=e.startTime,i=e.endTime;w(t),S(n),D(a),p(r),E(i)},saveDuration:function(e){_(!1),i(t.id,{seconds:e.seconds,minutes:e.minutes,hours:e.hours,startTime:e.startTime,endTime:e.endTime})},onCancel:function(){_(!1)}})):r.a.createElement("small",{className:"text-secondary mr-3",onClick:function(e){_(!0)}},T(t.hours),":",T(t.minutes),":",T(t.seconds),".",T(t.milliSeconds))),r.a.createElement("button",{className:"btn btn-danger d-flex align-items-center",onClick:function(e){window.confirm("Are you sure you want to delete this entry?")&&n(e.target.dataset.id)},"data-id":t.id},r.a.createElement("i",{className:"material-icons-round","data-id":t.id},"delete"))))}function N(e){var t=e.entries,n=e.handleDeleteEntry,a=e.handleEditEntry,i=function(e){return String("00"+e).slice(-2)};if(t&&t.length>0){var s=t.map((function(e){return r.a.createElement(w,{key:e.id,padZero:i,entry:e,handleDeleteEntry:n,handleEditEntry:a})}));return r.a.createElement("ul",{className:"list-group col-12 pr-0"},s)}return null}n(76);function x(e){var t=e.db,n=Object(a.useState)(0),i=Object(u.a)(n,2),s=i[0],c=i[1],m=Object(a.useState)(0),d=Object(u.a)(m,2),b=d[0],p=d[1],h=Object(a.useState)(0),g=Object(u.a)(h,2),v=g[0],E=g[1],y=Object(a.useState)(0),j=Object(u.a)(y,2),O=j[0],T=j[1],w=Object(a.useState)(!1),x=Object(u.a)(w,2),S=x[0],C=x[1],k=Object(a.useState)(!1),D=Object(u.a)(k,2),I=D[0],A=D[1],Z=Object(a.useState)(""),W=Object(u.a)(Z,2),B=W[0],M=W[1],U=Object(a.useState)([]),_=Object(u.a)(U,2),R=_[0],F=_[1],J=Object(a.useState)(new Date),L=Object(u.a)(J,2),P=L[0],$=L[1],z=Object(a.useState)(new Date),K=Object(u.a)(z,2);K[0],K[1];function q(e){!0===e?(p(0),c(0),E(0),T(0),C(!1),A(!1),M("")):window.confirm("Are you sure you want to reset timer?")&&(p(0),c(0),E(0),T(0),C(!1),A(!1),M(""))}Object(a.useEffect)((function(){var e=null;return S?(I||A(!0),e=setInterval((function(){59===b?(p(0),59===v?(E(0),T(O+1)):E(v+1)):p(b+1)}),1e3)):S||0===s||clearInterval(e),function(){clearInterval(e)}}),[S,I,s,b,O,v]),Object(a.useEffect)((function(){return t.version(1).stores({timeEntries:"id, createdAt, updatedAt, title, milliSeconds, seconds, minutes, hours, startTime, endTime"}),t.timeEntries.toCollection().sortBy("createdAt").then((function(e){F(e)})),function(){return t.close()}}),[t]);var G=function(e){return String("00"+e).slice(-2)},H=function(e){var n;(n=Object(f.a)(),function(e){var a=Object(l.a)({id:n},e,{createdAt:new Date});t.timeEntries.put(a).then((function(e){var t=[].concat(Object(o.a)(R),[a]);F(t)})),q(!0)})({title:B,milliSeconds:s,seconds:b,minutes:v,hours:O,startTime:P,endTime:new Date})};return r.a.createElement("div",{className:"row d-flex align-items-center"},r.a.createElement("div",{className:"current-entry d-flex align-items-center col-12 p-0 my-5"},r.a.createElement("div",{className:"col pl-0"},r.a.createElement("input",{type:"text",className:"form-control",id:"title",placeholder:"What are you working on?",value:B,onChange:function(e){M(e.target.value)}})),r.a.createElement("div",{className:"row"},r.a.createElement("button",{className:"btn btn-primary mr-3 ml-4 d-flex align-items-center",onClick:function(){S||$(new Date),C(!S)}},S?r.a.createElement("i",{className:"material-icons-round"},"pause"):r.a.createElement("i",{className:"material-icons-round"},"play_arrow")),S||!I?r.a.createElement("button",{disabled:!I,className:"btn btn-danger mr-3 d-flex align-items-center",onClick:function(){H()}},r.a.createElement("i",{className:"material-icons-round"},"stop")):r.a.createElement("button",{className:"btn btn-success py-0 mr-3 d-flex align-items-center",onClick:H},r.a.createElement("i",{className:"material-icons-round"},"save"))),r.a.createElement("div",{className:"timer d-flex align-items-center"},r.a.createElement("div",{className:"time"},G(O),":",G(v),":",G(b)),I?r.a.createElement("button",{className:"btn m-0 btn-delete",onClick:q},r.a.createElement("i",{class:"material-icons-round d-flex"},"delete")):null)),t?r.a.createElement(N,{entries:R,handleDeleteEntry:function(e){t.table("timeEntries").delete(e).then((function(){var t=R.filter((function(t){return t.id!==e}));F(t)}))},handleEditEntry:function(e,n){t.table("timeEntries").update(e,Object(l.a)({},n,{updatedAt:new Date})).then((function(){var t=R.find((function(t){return t.id===e})),a=[].concat(Object(o.a)(R.filter((function(t){return t.id!==e}))),[Object.assign({},t,n)]);F(a)}))}}):null)}var S=function(){return r.a.createElement("div",{className:""},r.a.createElement("nav",{class:"navbar navbar-light bg-primary"},r.a.createElement("a",{class:"navbar-brand d-flex",href:"#"},r.a.createElement("img",{src:"timely-logo.svg",height:"30",alt:"",loading:"lazy"}))),r.a.createElement("div",{className:"container"},r.a.createElement(x,{db:new c.a("TimelyDatabase")})))},C=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function k(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}s.a.render(r.a.createElement(S,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");C?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):k(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):k(t,e)}))}}()}},[[35,1,2]]]);
//# sourceMappingURL=main.a446ac2e.chunk.js.map