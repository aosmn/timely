(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{45:function(e,t,n){e.exports=n(90)},50:function(e,t,n){},54:function(e,t,n){},61:function(e,t,n){},88:function(e,t,n){},90:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),s=n(5),i=n.n(s),o=(n(50),n(11)),c=n(12),l=n(13),u=n(14),m=n(41),d=(n(54),n(25)),f=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).handleJoyrideCallback=function(e){var t=e.status;[d.a.FINISHED,d.a.SKIPPED].includes(t)&&window.localStorage.setItem("timelyTutorialDone",!0)},a.state={stepIndex:0,steps:[{target:".step-0",content:"Timely is a time logging app. Let's get productive!"},{target:".step-1",content:"Enter the title of the task you're currently working on"},{target:".step-2",content:"Start the timer"},{target:".step-3",content:"Stop the timer"},{target:".step-4",content:"Timer duration is shown here"},{target:".step-5",content:"Your time entries will be shown here"}]},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){console.log("here"),this.setState({runTutorial:!0})}},{key:"render",value:function(){var e=this.state.steps;return window.localStorage.getItem("timelyTutorialDone")?null:r.a.createElement(d.b,{steps:e,continuous:!0,callback:this.handleJoyrideCallback,disableOverlayClose:!0,showProgress:!0,showSkipButton:!0})}}]),n}(a.Component),p=n(34),h=n(35),b=n(4),g=n(93),v=n(8),E=n.n(v),y=(n(61),n(44)),j=n(32),w=n.n(j),O=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e,a){var r;return Object(o.a)(this,n),(r=t.call(this,e,a)).onChangeText=function(e){var t=e.target.value,n=t.split(":"),a=parseInt(n.pop(),10)||0,s=parseInt(n.pop(),10)||0,i=parseInt(n.pop(),10)||0,o=60*i*60+60*s+a;console.log(i,s,a),o=r.splitDuration(o),(""===t||r.state.regexp.test(t))&&r.setState({duration:t,hours:o.hours,minutes:o.minutes,seconds:o.seconds,endTime:E()(r.state.startTime).add(o,"seconds")._d},(function(){r.props.onChange({seconds:r.state.seconds,minutes:r.state.minutes,hours:r.state.hours,startTime:r.state.startTime,endTime:r.state.startTime})}))},r.onBlur=function(e){var t=e.target.value,n=t.split(":"),a=parseInt(n.pop(),10)||0,s=parseInt(n.pop(),10)||0,i=parseInt(n.pop(),10)||0,o=60*i*60+60*s+a;console.log(i,s,a),o=r.splitDuration(o),(""===t||r.state.regexp.test(t))&&r.setState({duration:"".concat(r.padZero(o.hours),":").concat(r.padZero(o.minutes),":").concat(r.padZero(o.seconds))})},r.splitDuration=function(e){var t=e%60,n=(e-t)/60,a=n%60;return{seconds:t,minutes:a,hours:(n-a)/60}},r.getDuration=function(e,t){var n=E()(t).diff(E()(e),"seconds"),a=r.splitDuration(n),s=a.hours,i=a.minutes,o=a.seconds;r.setState({seconds:o,minutes:i,hours:s,duration:"".concat(r.padZero(s),":").concat(r.padZero(i),":").concat(r.padZero(o))},(function(){r.props.onChange({seconds:r.state.seconds,minutes:r.state.minutes,hours:r.state.hours,startTime:r.state.startTime,endTime:r.state.endTime})}))},r.onChangeStartTime=function(e){r.setState({startTime:e}),r.getDuration(e,r.state.endTime)},r.onChangeEndTime=function(e){r.setState({endTime:e}),r.getDuration(r.state.startTime,e)},r.saveDuration=function(){r.props.saveDuration({seconds:r.state.seconds,minutes:r.state.minutes,hours:r.state.hours,startTime:r.state.startTime,endTime:r.state.endTime})},r.padZero=function(e){return String("00"+e).slice(-2)},r.state={startTime:e.entry.startTime||new Date,endTime:e.entry.endTime||new Date,regexp:/^[0-9:\b]+$/,seconds:e.entry.seconds,minutes:e.entry.minutes,hours:e.entry.hours,duration:"".concat(r.padZero(e.entry.hours),":").concat(r.padZero(e.entry.minutes),":").concat(r.padZero(e.entry.seconds))},r}return Object(c.a)(n,[{key:"render",value:function(){var e=this,t=this.props.onCancel;return r.a.createElement("div",{className:"duration-picker-container d-flex align-items-center"},r.a.createElement("div",{className:"form-group d-flex flex-row align-items-center mb-0"},r.a.createElement(y.a,{trigger:r.a.createElement("input",{type:"text",className:"form-control time-input-part",id:"duration",value:this.state.duration,onChange:this.onChangeText,onBlur:this.onBlur}),position:"bottom center",on:"focus"},(function(t){return r.a.createElement("div",{className:"d-flex"},r.a.createElement("div",{className:"d-flex flex-column"},r.a.createElement("label",{className:"text-secondary text-left"},r.a.createElement("small",null,"From")),r.a.createElement(w.a,{onChange:e.onChangeStartTime,value:e.state.startTime,disableClock:!0,calendarIcon:null,clearIcon:null,maxDetail:"second",maxDate:E()(e.state.endTime).subtract({seconds:1})._d,className:"mr-3"})),r.a.createElement("div",{className:"d-flex flex-column"},r.a.createElement("label",{className:"text-secondary text-left"},r.a.createElement("small",null,"To")),r.a.createElement(w.a,{onChange:e.onChangeEndTime,value:e.state.endTime,disableClock:!0,calendarIcon:null,clearIcon:null,maxDetail:"second",minDate:E()(e.state.startTime).add({seconds:1})._d})))}))),r.a.createElement("button",{className:"btn btn-secondary d-flex px-2 ml-2",onClick:this.saveDuration},r.a.createElement("i",{className:"material-icons-round"},"save")),r.a.createElement("button",{className:"btn btn-link text-dark d-flex p-0",onClick:t},r.a.createElement("i",{className:"material-icons-round"},"close")))}}]),n}(a.Component),T=function(e){return String("00"+e).slice(-2)};function N(e){var t=e.entry,n=e.handleDeleteEntry,s=e.handleEditEntry,i=Object(a.useState)(t.title),o=Object(b.a)(i,2),c=o[0],l=o[1],u=Object(a.useState)(t.startTime),m=Object(b.a)(u,2),d=m[0],f=m[1],p=Object(a.useState)(t.endTime),h=Object(b.a)(p,2),g=h[0],v=h[1],y=Object(a.useState)(t.seconds),j=Object(b.a)(y,2)[1],w=Object(a.useState)(t.minutes),N=Object(b.a)(w,2)[1],x=Object(a.useState)(t.hours),S=Object(b.a)(x,2)[1],k=Object(a.useState)(!1),C=Object(b.a)(k,2),D=C[0],I=C[1],A=Object(a.useState)(!1),Z=Object(b.a)(A,2),W=Z[0],B=Z[1],M=null;Object(a.useEffect)((function(){M&&M.focus()}),[M,D]);return r.a.createElement("li",{key:t.id,className:"list-group-item list-group-item-action d-flex justify-content-between align-items-center"},r.a.createElement("div",{className:"d-flex"},D?r.a.createElement("div",{className:"form-group mb-0"},r.a.createElement("input",{type:"text",className:"form-control",id:"entryTitle",placeholder:"No title",value:c,onChange:function(e){l(e.target.value)},onKeyUp:function(e){if(13===e.which){I(!1);var n={title:e.target.value};s(t.id,n),M=null}},onBlur:function(e){I(!1);var n={title:e.target.value};s(t.id,n),M=null},"data-id":t.id,ref:function(e){M=e}})):r.a.createElement("div",{onClick:function(e){I(!0)}},t.title||"No title",r.a.createElement("small",{className:"ml-3"},E()(d).format("ddd MMM D, hh:mm:ssa")," - ",E()(g).format("ddd MMM D, hh:mm:ssa")))),r.a.createElement("div",{className:"d-flex flex-row align-items-center"},r.a.createElement("div",{className:"duration d-flex align-items-center"},W?r.a.createElement(r.a.Fragment,null,r.a.createElement(O,{entry:t,onChange:function(e){var t=e.seconds,n=e.minutes,a=e.hours,r=e.startTime,s=e.endTime;j(t),N(n),S(a),f(r),v(s)},saveDuration:function(e){B(!1),s(t.id,{seconds:e.seconds,minutes:e.minutes,hours:e.hours,startTime:e.startTime,endTime:e.endTime})},onCancel:function(){B(!1)}})):r.a.createElement("small",{className:"text-secondary mr-3",onClick:function(e){B(!0)}},T(t.hours),":",T(t.minutes),":",T(t.seconds),".",T(t.milliSeconds))),r.a.createElement("button",{className:"btn btn-danger d-flex align-items-center",onClick:function(e){window.confirm("Are you sure you want to delete this entry?")&&n(e.target.dataset.id)},"data-id":t.id},r.a.createElement("i",{className:"material-icons-round","data-id":t.id},"delete"))))}function x(e){var t=e.entries,n=e.handleDeleteEntry,a=e.handleEditEntry,s=function(e){return String("00"+e).slice(-2)};if(t&&t.length>0){var i=t.map((function(e){return r.a.createElement(N,{key:e.id,padZero:s,entry:e,handleDeleteEntry:n,handleEditEntry:a})}));return r.a.createElement("ul",{className:"list-group col-12 pr-0 step-5 "},i)}return r.a.createElement("div",{className:"col-12 px-0 step-5"},r.a.createElement("div",{className:"alert alert-secondary text-center text-secondary",role:"alert"},"No logs yet. Start logging your time now!"))}n(88);function S(e){var t=e.db,n=Object(a.useState)(0),s=Object(b.a)(n,2),i=s[0],o=s[1],c=Object(a.useState)(0),l=Object(b.a)(c,2),u=l[0],m=l[1],d=Object(a.useState)(0),f=Object(b.a)(d,2),v=f[0],E=f[1],y=Object(a.useState)(0),j=Object(b.a)(y,2),w=j[0],O=j[1],T=Object(a.useState)(!1),N=Object(b.a)(T,2),S=N[0],k=N[1],C=Object(a.useState)(!1),D=Object(b.a)(C,2),I=D[0],A=D[1],Z=Object(a.useState)(""),W=Object(b.a)(Z,2),B=W[0],M=W[1],P=Object(a.useState)([]),J=Object(b.a)(P,2),U=J[0],_=J[1],F=Object(a.useState)(new Date),L=Object(b.a)(F,2),R=L[0],K=L[1];function $(e){!0===e?(m(0),o(0),E(0),O(0),k(!1),A(!1),M("")):window.confirm("Are you sure you want to reset timer?")&&(m(0),o(0),E(0),O(0),k(!1),A(!1),M(""))}Object(a.useEffect)((function(){var e=null;return S?(I||A(!0),e=setInterval((function(){59===u?(m(0),59===v?(E(0),O(w+1)):E(v+1)):m(u+1)}),1e3)):S||0===i||clearInterval(e),function(){clearInterval(e)}}),[S,I,i,u,w,v]),Object(a.useEffect)((function(){return t.version(1).stores({timeEntries:"id, createdAt, updatedAt, title, milliSeconds, seconds, minutes, hours, startTime, endTime"}),t.timeEntries.toCollection().sortBy("createdAt").then((function(e){_(e)})),function(){return t.close()}}),[t]);var z=function(e){return String("00"+e).slice(-2)},H=function(e){var n;(n=Object(g.a)(),function(e){var a=Object(h.a)({id:n},e,{createdAt:new Date});t.timeEntries.put(a).then((function(e){var t=[].concat(Object(p.a)(U),[a]);_(t)})),$(!0)})({title:B,milliSeconds:i,seconds:u,minutes:v,hours:w,startTime:R,endTime:new Date})};return r.a.createElement("div",{className:"row d-flex align-items-center"},r.a.createElement("div",{className:"current-entry d-flex align-items-center col-12 p-0 my-5"},r.a.createElement("div",{className:"col pl-0"},r.a.createElement("input",{type:"text",className:"form-control step-1",id:"title",placeholder:"What are you working on?",value:B,onChange:function(e){M(e.target.value)}})),r.a.createElement("div",{className:"row"},r.a.createElement("button",{className:"btn btn-primary mr-3 ml-4 d-flex align-items-center step-2",onClick:function(){S||K(new Date),k(!S)}},S?r.a.createElement("i",{className:"material-icons-round"},"pause"):r.a.createElement("i",{className:"material-icons-round"},"play_arrow")),S||!I?r.a.createElement("button",{disabled:!I,className:"btn btn-danger mr-3 d-flex align-items-center step-3",onClick:function(){H()}},r.a.createElement("i",{className:"material-icons-round"},"stop")):r.a.createElement("button",{className:"btn btn-success py-0 mr-3 d-flex align-items-center",onClick:H},r.a.createElement("i",{className:"material-icons-round"},"save"))),r.a.createElement("div",{className:"timer d-flex align-items-center step-4"},r.a.createElement("div",{className:"time"},z(w),":",z(v),":",z(u)),I?r.a.createElement("button",{className:"btn m-0 btn-delete",onClick:$},r.a.createElement("i",{className:"material-icons-round d-flex"},"delete")):null)),t?r.a.createElement(x,{entries:U,handleDeleteEntry:function(e){t.table("timeEntries").delete(e).then((function(){var t=U.filter((function(t){return t.id!==e}));_(t)}))},handleEditEntry:function(e,n){t.table("timeEntries").update(e,Object(h.a)({},n,{updatedAt:new Date})).then((function(){var t=U.find((function(t){return t.id===e})),a=[].concat(Object(p.a)(U.filter((function(t){return t.id!==e}))),[Object.assign({},t,n)]);_(a)}))}}):null)}var k=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:""},r.a.createElement(f,null),r.a.createElement("nav",{className:"navbar navbar-light bg-primary"},r.a.createElement("div",{className:"container"},r.a.createElement("a",{className:"navbar-brand d-flex step-0",href:"/"},r.a.createElement("img",{src:"".concat("/timely","/timely-logo.svg"),height:"30",alt:"",loading:"lazy"})))),r.a.createElement("div",{className:"container"},r.a.createElement(S,{db:new m.a("TimelyDatabase")})))}}]),n}(a.Component),C=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function D(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.a.render(r.a.createElement(k,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/timely",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/timely","/service-worker.js");C?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):D(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):D(t,e)}))}}()}},[[45,1,2]]]);
//# sourceMappingURL=main.b5108f47.chunk.js.map