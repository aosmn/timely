(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{46:function(e,t,n){e.exports=n(92)},51:function(e,t,n){},55:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},87:function(e,t,n){},92:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(5),i=n.n(s),o=(n(51),n(11)),c=n(12),l=n(13),u=n(14),m=n(42),d=(n(55),n(36)),f=n(30),p=n(4),h=n(8),b=n.n(h),g=n(95),v=n(20),E=(n(57),a.Component,n(58),n(43)),y=n(31),w=n.n(y),j=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e,a){var r;return Object(o.a)(this,n),(r=t.call(this,e,a)).onChangeText=function(e){var t=e.target.value,n=t.split(":"),a=(e.target.id,parseInt(n.pop(),10)||0),s=parseInt(n.pop(),10)||0,i=parseInt(n.pop(),10)||0,o=60*i*60+60*s+a;console.log(i,s,a),o=r.splitDuration(o),(""===t||r.state.regexp.test(t))&&r.setState({duration:t,hours:o.hours,minutes:o.minutes,seconds:o.seconds,endTime:b()(r.state.startTime).add(o,"seconds")._d},(function(){r.props.onChange({seconds:r.state.seconds,minutes:r.state.minutes,hours:r.state.hours,startTime:r.state.startTime,endTime:r.state.startTime})}))},r.onBlur=function(e){var t=e.target.value,n=t.split(":"),a=(e.target.id,parseInt(n.pop(),10)||0),s=parseInt(n.pop(),10)||0,i=parseInt(n.pop(),10)||0,o=60*i*60+60*s+a;console.log(i,s,a),o=r.splitDuration(o),(""===t||r.state.regexp.test(t))&&r.setState({duration:"".concat(r.padZero(o.hours),":").concat(r.padZero(o.minutes),":").concat(r.padZero(o.seconds))})},r.splitDuration=function(e){var t=e%60,n=(e-t)/60,a=n%60;return{seconds:t,minutes:a,hours:(n-a)/60}},r.getDuration=function(e,t){var n=b()(t).diff(b()(e),"seconds"),a=r.splitDuration(n),s=a.hours,i=a.minutes,o=a.seconds;r.setState({seconds:o,minutes:i,hours:s,duration:"".concat(r.padZero(s),":").concat(r.padZero(i),":").concat(r.padZero(o))},(function(){r.props.onChange({seconds:r.state.seconds,minutes:r.state.minutes,hours:r.state.hours,startTime:r.state.startTime,endTime:r.state.endTime})}))},r.onChangeStartTime=function(e){r.setState({startTime:e}),r.getDuration(e,r.state.endTime)},r.onChangeEndTime=function(e){r.setState({endTime:e}),r.getDuration(r.state.startTime,e)},r.saveDuration=function(){r.props.saveDuration({seconds:r.state.seconds,minutes:r.state.minutes,hours:r.state.hours,startTime:r.state.startTime,endTime:r.state.endTime})},r.padZero=function(e){return String("00"+e).slice(-2)},r.state={startTime:e.entry.startTime||new Date,endTime:e.entry.endTime||new Date,regexp:/^[0-9\:\b]+$/,seconds:e.entry.seconds,minutes:e.entry.minutes,hours:e.entry.hours,duration:"".concat(r.padZero(e.entry.hours),":").concat(r.padZero(e.entry.minutes),":").concat(r.padZero(e.entry.seconds))},r}return Object(c.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=(t.trigger,t.entry,t.onCancel);t.onClick;return r.a.createElement("div",{className:"duration-picker-container d-flex align-items-center"},r.a.createElement("div",{className:"form-group d-flex flex-row align-items-center mb-0"},r.a.createElement(E.a,{trigger:r.a.createElement("input",{type:"text",className:"form-control time-input-part",id:"duration",value:this.state.duration,onChange:this.onChangeText,onBlur:this.onBlur}),position:"bottom center",on:"focus"},(function(t){return r.a.createElement("div",{className:"d-flex"},r.a.createElement("div",{className:"d-flex flex-column"},r.a.createElement("label",{className:"text-secondary text-left"},r.a.createElement("small",null,"From")),r.a.createElement(w.a,{onChange:e.onChangeStartTime,value:e.state.startTime,disableClock:!0,calendarIcon:null,clearIcon:null,maxDetail:"second",maxDate:b()(e.state.endTime).subtract({seconds:1})._d,className:"mr-3"})),r.a.createElement("div",{className:"d-flex flex-column"},r.a.createElement("label",{className:"text-secondary text-left"},r.a.createElement("small",null,"To")),r.a.createElement(w.a,{onChange:e.onChangeEndTime,value:e.state.endTime,disableClock:!0,calendarIcon:null,clearIcon:null,maxDetail:"second",minDate:b()(e.state.startTime).add({seconds:1})._d})))}))),r.a.createElement("button",{className:"btn btn-secondary d-flex px-2 ml-2",onClick:this.saveDuration},r.a.createElement("i",{className:"material-icons-round"},"save")),r.a.createElement("button",{className:"btn btn-link text-dark d-flex p-0",onClick:n},r.a.createElement("i",{className:"material-icons-round"},"close")))}}]),n}(a.Component),O=function(e){return String("00"+e).slice(-2)};function T(e){var t=e.entry,n=e.handleDeleteEntry,s=e.handleEditEntry,i=Object(a.useState)(t.title),o=Object(p.a)(i,2),c=o[0],l=o[1],u=Object(a.useState)(t.startTime),m=Object(p.a)(u,2),d=m[0],f=m[1],h=Object(a.useState)(t.endTime),g=Object(p.a)(h,2),v=g[0],E=g[1],y=Object(a.useState)(t.seconds),w=Object(p.a)(y,2),T=(w[0],w[1]),N=Object(a.useState)(t.minutes),x=Object(p.a)(N,2),S=(x[0],x[1]),C=Object(a.useState)(t.hours),k=Object(p.a)(C,2),D=(k[0],k[1]),I=Object(a.useState)(!1),A=Object(p.a)(I,2),Z=A[0],W=A[1],B=Object(a.useState)(!1),M=Object(p.a)(B,2),P=M[0],J=M[1],U=null;Object(a.useEffect)((function(){U&&U.focus()}),[U,Z]);return r.a.createElement("li",{key:t.id,className:"list-group-item list-group-item-action d-flex justify-content-between align-items-center"},r.a.createElement("div",{className:"d-flex"},Z?r.a.createElement("div",{className:"form-group mb-0"},r.a.createElement("input",{type:"text",className:"form-control",id:"entryTitle",placeholder:"No title",value:c,onChange:function(e){l(e.target.value)},onKeyUp:function(e){if(13===e.which){W(!1);var n={title:e.target.value};s(t.id,n),U=null}},onBlur:function(e){W(!1);var n={title:e.target.value};s(t.id,n),U=null},"data-id":t.id,ref:function(e){U=e}})):r.a.createElement("div",{onClick:function(e){W(!0)}},t.title||"No title",r.a.createElement("small",{className:"ml-3"},b()(d).format("ddd MMM D, hh:mm:ssa")," - ",b()(v).format("ddd MMM D, hh:mm:ssa")))),r.a.createElement("div",{className:"d-flex flex-row align-items-center"},r.a.createElement("div",{className:"duration d-flex align-items-center"},P?r.a.createElement(r.a.Fragment,null,r.a.createElement(j,{entry:t,onChange:function(e){var t=e.seconds,n=e.minutes,a=e.hours,r=e.startTime,s=e.endTime;T(t),S(n),D(a),f(r),E(s)},saveDuration:function(e){J(!1),s(t.id,{seconds:e.seconds,minutes:e.minutes,hours:e.hours,startTime:e.startTime,endTime:e.endTime})},onCancel:function(){J(!1)}})):r.a.createElement("small",{className:"text-secondary mr-3",onClick:function(e){J(!0)}},O(t.hours),":",O(t.minutes),":",O(t.seconds),".",O(t.milliSeconds))),r.a.createElement("button",{className:"btn btn-danger d-flex align-items-center",onClick:function(e){window.confirm("Are you sure you want to delete this entry?")&&n(e.target.dataset.id)},"data-id":t.id},r.a.createElement("i",{className:"material-icons-round","data-id":t.id},"delete"))))}function N(e){var t=e.entries,n=e.handleDeleteEntry,a=e.handleEditEntry,s=function(e){return String("00"+e).slice(-2)};if(t&&t.length>0){var i=t.map((function(e){return r.a.createElement(T,{key:e.id,padZero:s,entry:e,handleDeleteEntry:n,handleEditEntry:a})}));return r.a.createElement("ul",{className:"list-group col-12 pr-0 step-5 "},i)}return null}n(87);function x(e){var t=e.db,n=Object(a.useState)(0),s=Object(p.a)(n,2),i=s[0],o=s[1],c=Object(a.useState)(0),l=Object(p.a)(c,2),u=l[0],m=l[1],h=Object(a.useState)(0),b=Object(p.a)(h,2),v=b[0],E=b[1],y=Object(a.useState)(0),w=Object(p.a)(y,2),j=w[0],O=w[1],T=Object(a.useState)(!1),x=Object(p.a)(T,2),S=x[0],C=x[1],k=Object(a.useState)(!1),D=Object(p.a)(k,2),I=D[0],A=D[1],Z=Object(a.useState)(""),W=Object(p.a)(Z,2),B=W[0],M=W[1],P=Object(a.useState)([]),J=Object(p.a)(P,2),U=J[0],_=J[1],F=Object(a.useState)(new Date),L=Object(p.a)(F,2),R=L[0],K=L[1],$=Object(a.useState)(new Date),z=Object(p.a)($,2);z[0],z[1];function H(e){!0===e?(m(0),o(0),E(0),O(0),C(!1),A(!1),M("")):window.confirm("Are you sure you want to reset timer?")&&(m(0),o(0),E(0),O(0),C(!1),A(!1),M(""))}Object(a.useEffect)((function(){var e=null;return S?(I||A(!0),e=setInterval((function(){59===u?(m(0),59===v?(E(0),O(j+1)):E(v+1)):m(u+1)}),1e3)):S||0===i||clearInterval(e),function(){clearInterval(e)}}),[S,I,i,u,j,v]),Object(a.useEffect)((function(){return t.version(1).stores({timeEntries:"id, createdAt, updatedAt, title, milliSeconds, seconds, minutes, hours, startTime, endTime"}),t.timeEntries.toCollection().sortBy("createdAt").then((function(e){_(e)})),function(){return t.close()}}),[t]);var Y=function(e){return String("00"+e).slice(-2)},q=function(e){var n;(n=Object(g.a)(),function(e){var a=Object(f.a)({id:n},e,{createdAt:new Date});t.timeEntries.put(a).then((function(e){var t=[].concat(Object(d.a)(U),[a]);_(t)})),H(!0)})({title:B,milliSeconds:i,seconds:u,minutes:v,hours:j,startTime:R,endTime:new Date})};return r.a.createElement("div",{className:"row d-flex align-items-center"},r.a.createElement("div",{className:"current-entry d-flex align-items-center col-12 p-0 my-5"},r.a.createElement("div",{className:"col pl-0"},r.a.createElement("input",{type:"text",className:"form-control step-1",id:"title",placeholder:"What are you working on?",value:B,onChange:function(e){M(e.target.value)}})),r.a.createElement("div",{className:"row"},r.a.createElement("button",{className:"btn btn-primary mr-3 ml-4 d-flex align-items-center step-2",onClick:function(){S||K(new Date),C(!S)}},S?r.a.createElement("i",{className:"material-icons-round"},"pause"):r.a.createElement("i",{className:"material-icons-round"},"play_arrow")),S||!I?r.a.createElement("button",{disabled:!I,className:"btn btn-danger mr-3 d-flex align-items-center step-3",onClick:function(){q()}},r.a.createElement("i",{className:"material-icons-round"},"stop")):r.a.createElement("button",{className:"btn btn-success py-0 mr-3 d-flex align-items-center",onClick:q},r.a.createElement("i",{className:"material-icons-round"},"save"))),r.a.createElement("div",{className:"timer d-flex align-items-center step-4"},r.a.createElement("div",{className:"time"},Y(j),":",Y(v),":",Y(u)),I?r.a.createElement("button",{className:"btn m-0 btn-delete",onClick:H},r.a.createElement("i",{class:"material-icons-round d-flex"},"delete")):null)),t?r.a.createElement(N,{entries:U,handleDeleteEntry:function(e){t.table("timeEntries").delete(e).then((function(){var t=U.filter((function(t){return t.id!==e}));_(t)}))},handleEditEntry:function(e,n){t.table("timeEntries").update(e,Object(f.a)({},n,{updatedAt:new Date})).then((function(){var t=U.find((function(t){return t.id===e})),a=[].concat(Object(d.a)(U.filter((function(t){return t.id!==e}))),[Object.assign({},t,n)]);_(a)}))}}):null)}var S=n(26),C=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).handleJoyrideCallback=function(e){var t=e.status;[S.a.FINISHED,S.a.SKIPPED].includes(t)&&window.localStorage.setItem("tutorialDone",!0)},a.state={steps:[{target:".step-0",content:"Timely is a time logging app. Let's get productive!"},{target:".step-1",content:"Enter the title of the task you're currently working on"},{target:".step-2",content:"Start the timer"},{target:".step-3",content:"Stop the timer"},{target:".step-4",content:"Timer duration is shown here"},{target:".step-5",content:"Your time entries will be shown here"}]},a}return Object(c.a)(n,[{key:"render",value:function(){var e=this.state.steps;return r.a.createElement("div",{className:""},window.localStorage.getItem("tutorialDone")?null:r.a.createElement(S.b,{steps:e,continuous:!0,callback:this.handleJoyrideCallback,disableOverlayClose:!0,showProgress:!0,showSkipButton:!0}),r.a.createElement("nav",{class:"navbar navbar-light bg-primary"},r.a.createElement("div",{className:"container"},r.a.createElement("a",{class:"navbar-brand d-flex step-0",href:"#"},r.a.createElement("img",{src:"timely-logo.svg",height:"30",alt:"",loading:"lazy"})))),r.a.createElement("div",{className:"container"},r.a.createElement(x,{db:new m.a("TimelyDatabase")})))}}]),n}(a.Component),k=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function D(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.a.render(r.a.createElement(C,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/timely",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/timely","/service-worker.js");k?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):D(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):D(t,e)}))}}()}},[[46,1,2]]]);
//# sourceMappingURL=main.1c3ae6ce.chunk.js.map